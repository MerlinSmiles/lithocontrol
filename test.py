# -*- coding: utf-8 -*-
"""
Demonstrates use of FillBetweenItem to fill the space between two plot curves.
"""

import pyqtgraph as pg
from pyqtgraph.Qt import QtGui, QtCore
import numpy as np
from FillItem import FillItem

win = pg.plot()
win.setWindowTitle('pyqtgraph example: FillBetweenItem')
win.setXRange(-10, 10)
win.setYRange(-10, 10)

N = 200
x = np.linspace(-10, 10, N)
gauss = np.exp(-x**2 / 20.)
mn = mx = np.zeros(len(x))
data = np.array([[  3.41315761,  21.5       ], [  2.45079697,  15.38903495], [  2.44571055,  15.34227491], [  2.44433205,  15.31089283], [  2.44459786,  15.27948162], [  2.44650724,  15.24812737], [  2.45005496,  15.21691601], [  2.45523129,  15.1859331 ], [  2.46202204,  15.15526356], [  2.47040861,  15.12499146], [  2.48036801,  15.09519976], [  2.49187293,  15.06597012], [  2.50489185,  15.03738266], [  2.51938908,  15.00951574], [  2.53532488,  14.98244573], [  2.55265558,  14.95624684], [  2.57133367,  14.93099087], [  2.59130795,  14.90674705], [  2.61252369,  14.88358183], [  2.63492273,  14.8615587 ], [  2.65844366,  14.84073803], [  2.68302204,  14.82117689], [  2.70859048,  14.80292888], [  2.73507891,  14.78604403], [  2.76241472,  14.77056862], [  2.79052299,  14.75654506], [  2.81932668,  14.7440118 ], [  2.84874683,  14.73300318], [  2.87870281,  14.72354938], [  2.9091125 ,  14.7156763 ], [  2.93989257,  14.70940554], [  2.97095864,  14.70475428], [  3.00222556,  14.70173527], [  3.03360764,  14.70035677], [  3.06501885,  14.70062258], [  3.09637311,  14.70253196], [  3.12758446,  14.70607967], [  3.15856737,  14.711256  ], [  3.18923691,  14.71804676], [  3.21950902,  14.72643333], [  3.24930072,  14.73639272], [  3.27853036,  14.74789765], [  3.30711781,  14.76091657], [  3.33498474,  14.77541379], [  3.36205474,  14.7913496 ], [  3.38825363,  14.80868029], [  3.4135096 ,  14.82735838], [  3.43775342,  14.84733267], [  3.46091864,  14.86854841], [  3.48294177,  14.89094744], [  3.50376244,  14.91446838], [  3.52332359,  14.93904676], [  3.5415716 ,  14.9646152 ], [  3.55845644,  14.99110363], [  3.57393186,  15.01843944], [  3.58795541,  15.04654771], [  3.60048868,  15.07535139], [  3.6114973 ,  15.10477154], [  3.62454262,  15.14822593], [  5.15502339,  21.5       ], [  3.41315761,  21.5       ]])
x = data[:,0]
y = data[:,1]
print(x)
curves = win.plot(x=x, y=y, pen='r')
curves2 = win.plot(x=[-100,100,100,-100,-100], y=[-100,-100,100,100,-100], pen='r')
brushes = [0.5, (100, 100, 255), 0.5]

fills = FillItem(curves, curves2, brushes[1])
# for f in fills:
win.addItem(fills)

# global mx, mn, curves, gauss, x
# a = 5 / abs(np.random.normal(loc=1, scale=0.2))
# y1 = data[:,0]
# y2 =  np.abs(a*gauss + np.random.normal(size=len(x)))

# s = 0.01
# mn = np.where(y1<mn, y1, mn) * (1-s) + y1 * s
# mx = np.where(y2>mx, y2, mx) * (1-s) + y2 * s
# curves[0].setData(x, mn)
# curves[1].setData(x, y1)
# curves[2].setData(x, y2)
# curves[3].setData(x, mx)



## Start Qt event loop unless running in interactive mode or using pyside.
if __name__ == '__main__':
    import sys
    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):
        QtGui.QApplication.instance().exec_()
